<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="description" content="Sistem Informasi Tanaman Obat Keluarga (TOGA) berbasis QR Code untuk RT 09 PKK. Temukan informasi lengkap tentang tanaman obat keluarga, manfaat, dan cara penggunaannya dengan mudah melalui pemindaian QR Code." />
  <title>TOGA RT 09</title>
  <meta name="theme-color" content="#1f7a3e" />
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <meta name="apple-mobile-web-app-title" content="TOGA" />
  <link rel="manifest" href="manifest.webmanifest" />
  <link rel="icon" href="assets/icons/icon-192.png" type="image/png" />
  <link rel="apple-touch-icon" href="assets/icons/icon-192.png" />
  <link rel="apple-touch-startup-image" href="assets/screenshots/install-mobile.png" />
  <link rel="dns-prefetch" href="//script.google.com" />
  <link rel="preconnect" href="https://script.google.com" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;700;800&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'" />
  <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;700;800&display=swap" /></noscript>
  <script>
    (function () {
      var splashKey = "toga:splash:shown";
      var installed =
        (typeof window.matchMedia === "function" &&
          window.matchMedia("(display-mode: standalone)").matches) ||
        window.navigator.standalone === true ||
        document.referrer.indexOf("android-app://") === 0;
      var ua = window.navigator.userAgent || "";
      var isiOS = /iphone|ipad|ipod/i.test(ua);
      document.documentElement.classList.add(installed ? "pwa-installed" : "pwa-browser");
      if (isiOS) {
        document.documentElement.classList.add("ios-webkit");
      }
      try {
        var isInternalNav = document.referrer.indexOf(window.location.origin) === 0;
        if (!isInternalNav) {
          sessionStorage.removeItem(splashKey);
        }
        var splashShown = sessionStorage.getItem(splashKey) === "1";
        if (splashShown) {
          document.documentElement.classList.add("pwa-splash-skip");
        } else if (installed) {
          document.documentElement.classList.add("pwa-launch-pending");
        }
      } catch (_) {}
    })();
  </script>
  <script>
    (function () {
      var key = "toga:theme";
      var theme = "";
      try {
        theme = localStorage.getItem(key) || "";
      } catch (_) {}
      if (theme !== "dark" && theme !== "light") {
        theme = "light";
      }
      document.documentElement.setAttribute("data-theme", theme);
      var meta = document.querySelector('meta[name="theme-color"]');
      if (meta) {
        meta.setAttribute("content", theme === "dark" ? "#0f1a14" : "#dff0dd");
      }
    })();
  </script>
  <style>
    html,
    body {
      background-color: #dff0dd;
    }
    html[data-theme="dark"],
    html[data-theme="dark"] body {
      background-color: #0f1a14;
    }
    #pwaBootSplash {
      position: fixed;
      inset: 0;
      z-index: 9999;
      display: none;
      place-items: center;
      background: linear-gradient(150deg, #2f7f48, #87ba58);
      color: #f3fbf8;
      font-family: "Plus Jakarta Sans", "Segoe UI", sans-serif;
      opacity: 1;
      transition: opacity 0.32s ease;
    }
    @media (display-mode: standalone) {
      #pwaBootSplash {
        display: grid;
      }
    }
    html.pwa-installed #pwaBootSplash {
      display: grid;
    }
    html.pwa-splash-skip #pwaBootSplash {
      display: none !important;
    }
    html.pwa-browser #pwaBootSplash {
      display: none !important;
    }
    html.pwa-launch-pending #pwaBootSplash {
      display: grid !important;
      opacity: 1 !important;
    }
    html.pwa-launch-pending body > :not(#pwaBootSplash) {
      visibility: hidden;
    }
    html.ios-webkit.pwa-launch-pending body > :not(#pwaBootSplash),
    html.ios-webkit.pwa-launch-pending body > :not(#pwaBootSplash) * {
      animation: none !important;
      transition: none !important;
    }
    #pwaBootSplash.is-hide {
      opacity: 0;
      pointer-events: none;
    }
    .pwa-launch-splash__inner {
      display: grid;
      justify-items: center;
      gap: 10px;
      text-align: center;
      padding: 18px;
    }
    .pwa-launch-splash__logo {
      width: 72px;
      height: 72px;
      border-radius: 18px;
      border: 1px solid rgba(255, 255, 255, 0.35);
      box-shadow: 0 12px 24px rgba(0, 0, 0, 0.26);
      background: rgba(255, 255, 255, 0.16);
      object-fit: cover;
      animation: pwaLogoPulse 1.4s ease-in-out infinite;
    }
    .pwa-launch-splash__title {
      font-size: 16px;
      font-weight: 800;
      letter-spacing: 0.2px;
    }
    .pwa-launch-splash__loading {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-size: 12px;
      color: rgba(243, 251, 248, 0.92);
    }
    .pwa-launch-splash__spinner {
      width: 16px;
      height: 16px;
      border-radius: 50%;
      border: 2px solid rgba(255, 255, 255, 0.28);
      border-top-color: #ffffff;
      animation: pwaSpin 0.9s linear infinite;
    }
    @keyframes pwaSpin {
      to { transform: rotate(360deg); }
    }
    @keyframes pwaLogoPulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.045); }
    }
  </style>
  <link rel="stylesheet" href="assets/style.css" />
</head>
<body>
  <div id="pwaBootSplash" class="pwa-launch-splash" aria-hidden="true">
    <div class="pwa-launch-splash__inner">
      <img class="pwa-launch-splash__logo" src="assets/icons/icon-192.png" alt="Logo TOGA" />
      <div class="pwa-launch-splash__title">TOGA RT 09</div>
      <div class="pwa-launch-splash__loading">
        <span class="pwa-launch-splash__spinner" aria-hidden="true"></span>
        <span>Memuat aplikasi...</span>
      </div>
    </div>
  </div>
  <header class="topbar">
    <div class="brand">
      <div class="logo">
        <img class="logo-mark" src="assets/icons/icon-192.png" alt="Logo TOGA" />
      </div>
      <div>
        <div class="title">TOGA RT 09</div>
        <div class="subtitle">Kebun Obat Keluarga • RT 09 PKK</div>
      </div>
    </div>
  </header>

  <main class="container">
    <div id="dataSourceNotice" class="data-source-note hidden" role="status" aria-live="polite"></div>

    <section id="stateLoading" class="card reveal">
      <div class="skeleton-img"></div>
      <div class="skeleton-line w60"></div>
      <div class="skeleton-line w40"></div>
      <div class="skeleton-line w90"></div>
      <div class="skeleton-line w80"></div>
    </section>

    <section id="stateError" class="card hidden reveal">
      <h2 id="stateErrorTitle">Tanaman tidak ditemukan</h2>
      <p id="stateErrorDesc">Cek kembali QR Code atau parameter <code>?id=...</code>.</p>
      <a class="btn" href="./">Lihat daftar tanaman</a>
    </section>

    <section id="stateList" class="hidden reveal">
      <article class="hero-panel">
        <div class="hero-copy">
          <p class="hero-kicker">TOGA RT 09</p>
          <h3 class="hero-title">Cari tanaman baru lebih cepat.</h3>
          <p class="hero-desc">Scan marker di menu AR untuk lihat detail instan.</p>
        </div>
        <div class="hero-actions">
          <a class="hero-link" href="ar.html">
            <span>Mulai Scan AR</span>
            <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M5 12h14M13 6l6 6-6 6" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </a>
        </div>
      </article>

      <div class="list-head">
        <h2 class="section-title">Daftar Tanaman</h2>
        <p id="listCount" class="list-count"></p>
      </div>

      <div class="search-wrap">
        <input id="searchInput" class="search-input" type="search" placeholder="Cari nama, latin, atau jenis..." autocomplete="off" />
      </div>

      <div class="toolbar">
        <div id="jenisFilters" class="filters" aria-label="Filter jenis tanaman"></div>
        <div class="view-toggle" role="group" aria-label="Mode tampilan daftar">
          <button id="viewGrid" class="toggle-btn is-active" type="button">Grid</button>
          <button id="viewList" class="toggle-btn" type="button">List</button>
        </div>
      </div>

      <div id="listWrap" class="grid"></div>
      <div id="loadMoreTrigger" class="load-more-trigger hidden" aria-hidden="true">
        <span class="load-more-spinner" aria-hidden="true"></span>
        <span class="load-more-text">Scroll untuk memuat data berikutnya...</span>
      </div>
      <div id="loadMoreActions" class="load-more-actions hidden">
        <button id="loadMoreBtn" class="btn btn-ghost btn-loadmore" type="button">
          Muat lagi 10 data
        </button>
        <p id="loadMoreDone" class="load-more-done hidden">Semua data sudah ditampilkan.</p>
      </div>
      <p id="listEmpty" class="empty hidden">Tidak ada tanaman yang cocok dengan pencarian.</p>
    </section>

    <section id="stateDetail" class="hidden reveal">
      <article class="card">
        <img id="img" class="hero" alt="Foto tanaman" />
        <div class="pad">
          <div class="chips">
            <span id="chipJenis" class="chip"></span>
            <span class="chip chip-soft">RT 09 • PKK</span>
          </div>

          <h1 id="nama" class="h1"></h1>
          <div id="latin" class="latin"></div>

          <div class="divider"></div>

          <h3 class="h3">Deskripsi</h3>
          <div id="deskripsi" class="desc"></div>
          
          <h3 class="h3">Manfaat</h3>
          <ul id="manfaat" class="list"></ul>

          <h3 class="h3">Catatan / Peringatan</h3>
          <ul id="catatan" class="list"></ul>

          <div class="actions">
            <a class="btn" href="./">Daftar tanaman</a>
            <button id="btnShare" class="btn btn-ghost" type="button">Bagikan</button>
          </div>
        </div>
      </article>
    </section>
  </main>

  <!-- <footer class="footer">
    <small>© RT 09 & PKK • Sistem Informasi TOGA berbasis QR</small>
  </footer> -->

  <nav class="bottom-nav" aria-label="Menu utama">
    <ul class="bottom-nav-list">
      <li class="bottom-nav-item">
        <a class="bottom-nav-link is-active" href="index.html" aria-current="page">
          <span class="bottom-nav-icon-wrap" aria-hidden="true">
            <svg class="bottom-nav-icon" viewBox="0 0 24 24" fill="none">
              <path d="M4 10.5 12 4l8 6.5V19a1 1 0 0 1-1 1h-4.8a1 1 0 0 1-1-1v-3.5a1.2 1.2 0 0 0-2.4 0V19a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-8.5Z" stroke="currentColor" stroke-width="1.6" stroke-linejoin="round"/>
            </svg>
          </span>
          <span class="bottom-nav-label">Home</span>
        </a>
      </li>
      <li class="bottom-nav-item">
        <a class="bottom-nav-link" href="gallery.html">
          <span class="bottom-nav-icon-wrap" aria-hidden="true">
            <svg class="bottom-nav-icon" viewBox="0 0 24 24" fill="none">
              <path d="M4 6.5A2.5 2.5 0 0 1 6.5 4h11A2.5 2.5 0 0 1 20 6.5v11a2.5 2.5 0 0 1-2.5 2.5h-11A2.5 2.5 0 0 1 4 17.5v-11Z" stroke="currentColor" stroke-width="1.6"/>
              <path d="m7 15 2.4-2.8a1 1 0 0 1 1.5-.03L13 14.7l1.9-2a1 1 0 0 1 1.5.02L18 15" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
              <circle cx="9" cy="8.5" r="1.2" fill="currentColor"/>
            </svg>
          </span>
          <span class="bottom-nav-label">Galeri</span>
        </a>
      </li>
      <li class="bottom-nav-item">
        <a class="bottom-nav-link" href="ar.html">
          <span class="bottom-nav-icon-wrap" aria-hidden="true">
            <svg class="bottom-nav-icon" viewBox="0 0 24 24" fill="none">
              <path d="M12 3.5 4.8 7.2v9.6L12 20.5l7.2-3.7V7.2L12 3.5Z" stroke="currentColor" stroke-width="1.7" stroke-linejoin="round"/>
              <path d="M12 20.5V12M19.2 7.2 12 12 4.8 7.2" stroke="currentColor" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </span>
          <span class="bottom-nav-label">AR</span>
        </a>
      </li>
      <li class="bottom-nav-item">
        <a class="bottom-nav-link" href="profile.html">
          <span class="bottom-nav-icon-wrap" aria-hidden="true">
            <svg class="bottom-nav-icon" viewBox="0 0 24 24" fill="none">
              <circle cx="12" cy="8" r="3.5" stroke="currentColor" stroke-width="1.6"/>
              <path d="M5.5 19a6.5 6.5 0 0 1 13 0" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/>
            </svg>
          </span>
          <span class="bottom-nav-label">Profile</span>
        </a>
      </li>
    </ul>
  </nav>

  <aside id="installBanner" class="install-banner hidden" aria-live="polite">
    <p class="install-text">Pasang aplikasi TOGA di layar utama untuk akses lebih cepat.</p>
    <div class="install-actions">
      <button id="installBtn" class="btn" type="button">Tambah ke Home Screen</button>
      <button id="dismissInstallBtn" class="btn btn-ghost" type="button" aria-label="Tutup banner instalasi">Nanti</button>
    </div>
  </aside>

  <script src="assets/theme.js" defer></script>
  <script src="assets/pwa.js" defer></script>
  <script src="assets/app.js" defer></script>
</body>
</html>
